---
title: CAF：在 Azure 中多個小組的治理設計
titleSuffix: Microsoft Cloud Adoption Framework for Azure
ms.service: architecture-center
ms.subservice: enterprise-cloud-adoption
ms.custom: governance
description: 針對多個小組、多個工作負載及多個環境設定 Azure 治理控制的指南
author: petertaylor9999
ms.date: 2/11/2019
ms.openlocfilehash: d0f3256e1d7b752789efd709f917e4eb2e996175
ms.sourcegitcommit: 273e690c0cfabbc3822089c7d8bc743ef41d2b6e
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/08/2019
ms.locfileid: "55901019"
---
# <a name="governance-design-for-multiple-teams"></a><span data-ttu-id="ef81c-103">多個小組的控管設計</span><span class="sxs-lookup"><span data-stu-id="ef81c-103">Governance design for multiple teams</span></span>

<span data-ttu-id="ef81c-104">本指南的目標是協助您了解在 Azure 中設計資源治理模型的程序，以支援多個小組、多個工作負載和多個環境。</span><span class="sxs-lookup"><span data-stu-id="ef81c-104">The goal of this guidance is to help you learn the process for designing a resource governance model in Azure to support multiple teams, multiple workloads, and multiple environments.</span></span> <span data-ttu-id="ef81c-105">首先您會查看一組假設性治理需求，然後瀏覽滿足這些需求的數個範例實作。</span><span class="sxs-lookup"><span data-stu-id="ef81c-105">First you'll look at a set of hypothetical governance requirements, then go through several example implementations that satisfy those requirements.</span></span>

<span data-ttu-id="ef81c-106">這些需求包括：</span><span class="sxs-lookup"><span data-stu-id="ef81c-106">The requirements are:</span></span>

- <span data-ttu-id="ef81c-107">企業計劃將新的雲端角色與責任轉換給一組使用者，因此需要在 Azure 中使用不同的資源存取需求，針對多個小組進行身分識別管理。</span><span class="sxs-lookup"><span data-stu-id="ef81c-107">The enterprise plans to transition new cloud roles and responsibilities to a set of users and therefore requires identity management for multiple teams with different resource access needs in Azure.</span></span> <span data-ttu-id="ef81c-108">需要身分識別管理系統來儲存下列使用者的身分識別：</span><span class="sxs-lookup"><span data-stu-id="ef81c-108">This identity management system is required to store the identity of the following users:</span></span>
  1. <span data-ttu-id="ef81c-109">組織中負責**訂用帳戶**擁有權的個人。</span><span class="sxs-lookup"><span data-stu-id="ef81c-109">The individual in your organization responsible for ownership of **subscriptions**.</span></span>
  2. <span data-ttu-id="ef81c-110">組織中負責**共用基礎結構資源** (用來將內部部署網路連線到 Azure 虛擬網路) 的個人。</span><span class="sxs-lookup"><span data-stu-id="ef81c-110">The individual in your organization responsible for the **shared infrastructure resources** used to connect your on-premises network to an Azure virtual network.</span></span>
  3. <span data-ttu-id="ef81c-111">貴組織中負責管理**工作負載**的兩個個人。</span><span class="sxs-lookup"><span data-stu-id="ef81c-111">Two individuals in your organization responsible for managing a **workload**.</span></span>
- <span data-ttu-id="ef81c-112">支援多個**環境**。</span><span class="sxs-lookup"><span data-stu-id="ef81c-112">Support for multiple **environments**.</span></span> <span data-ttu-id="ef81c-113">環境是資源 (例如虛擬機器、虛擬網路和網路流量路由服務) 的邏輯群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-113">An environment is a logical grouping of resources, such as virtual machines, virtual networking, and network traffic routing services.</span></span> <span data-ttu-id="ef81c-114">這些資源的群組有類似的管理和安全性需求，且通常用於特定的目的，例如測試或生產環境。</span><span class="sxs-lookup"><span data-stu-id="ef81c-114">These groups of resources have similar management and security requirements and are typically used for a specific purpose such as testing or production.</span></span> <span data-ttu-id="ef81c-115">在此範例中，需求適用於三種環境：</span><span class="sxs-lookup"><span data-stu-id="ef81c-115">In this example, the requirement is for three environments:</span></span>
  1. <span data-ttu-id="ef81c-116">**共用基礎結構環境**，其中包含其他環境中工作負載共用的資源。</span><span class="sxs-lookup"><span data-stu-id="ef81c-116">A **shared infrastructure environment** that includes resources shared by workloads in other environments.</span></span> <span data-ttu-id="ef81c-117">例如虛擬網路，具有提供與內部部署連線的閘道子網路。</span><span class="sxs-lookup"><span data-stu-id="ef81c-117">For example, a virtual network with a gateway subnet that provides connectivity to on-premises.</span></span>
  2. <span data-ttu-id="ef81c-118">**生產環境**，具有最嚴格的安全性原則。</span><span class="sxs-lookup"><span data-stu-id="ef81c-118">A **production environment** with the most restrictive security policies.</span></span> <span data-ttu-id="ef81c-119">可能包含內部或外部對向工作負載。</span><span class="sxs-lookup"><span data-stu-id="ef81c-119">May include internal or external facing workloads.</span></span>
  3. <span data-ttu-id="ef81c-120">**開發環境**，適用於概念證明和測試工作。</span><span class="sxs-lookup"><span data-stu-id="ef81c-120">A **development environment** for proof-of-concept and testing work.</span></span> <span data-ttu-id="ef81c-121">此環境具有與生產環境不同的安全性、合規性和成本原則。</span><span class="sxs-lookup"><span data-stu-id="ef81c-121">This environment has security, compliance, and cost policies that differ from those in the production environment.</span></span>
- <span data-ttu-id="ef81c-122">**最低權限的權限模型**，使用者在其中預設沒有任何權限。</span><span class="sxs-lookup"><span data-stu-id="ef81c-122">A **permissions model of least privilege** in which users have no permissions by default.</span></span> <span data-ttu-id="ef81c-123">模型必須支援下列項目：</span><span class="sxs-lookup"><span data-stu-id="ef81c-123">The model must support the following:</span></span>
  - <span data-ttu-id="ef81c-124">在訂用帳戶範圍中的單一信任使用者，具有指派資源存取權的權限。</span><span class="sxs-lookup"><span data-stu-id="ef81c-124">A single trusted user at the subscription scope with permission to assign resource access rights.</span></span>
  - <span data-ttu-id="ef81c-125">每個工作負載擁有者預設會遭到拒絕存取資源。</span><span class="sxs-lookup"><span data-stu-id="ef81c-125">Each workload owner is denied access to resources by default.</span></span> <span data-ttu-id="ef81c-126">資源存取權限是由訂用帳戶範圍的單一信任使用者明確授與。</span><span class="sxs-lookup"><span data-stu-id="ef81c-126">Resource access rights are granted explicitly by the single trusted user at the subscription scope.</span></span>
  - <span data-ttu-id="ef81c-127">共用基礎結構資源的管理存取權僅限於共用基礎結構擁有者。</span><span class="sxs-lookup"><span data-stu-id="ef81c-127">Management access for the shared infrastructure resources limited to the shared infrastructure owner.</span></span>
  - <span data-ttu-id="ef81c-128">每個工作負載的管理存取權僅限於工作負載管理員。</span><span class="sxs-lookup"><span data-stu-id="ef81c-128">Management access for each workload restricted to the workload owner.</span></span>
  - <span data-ttu-id="ef81c-129">企業不需要必須在三個環境中獨立管理角色，因此需要只使用[內建 RBAC 角色][rbac-built-in-roles]。</span><span class="sxs-lookup"><span data-stu-id="ef81c-129">The enterprise does not want to have to manage roles independently in each of the three environments, therefore requires the use of [built-in RBAC roles][rbac-built-in-roles] only.</span></span> <span data-ttu-id="ef81c-130">如果企業要使用自訂的 RBAC 角色，則需要額外的程序，才能跨三個環境同步處理自訂角色。</span><span class="sxs-lookup"><span data-stu-id="ef81c-130">If the enterprise were to use custom RBAC roles, an additional process is required to synchronize custom roles across the three environments.</span></span>
- <span data-ttu-id="ef81c-131">依工作負載擁有者名稱、環境或兩者所追蹤的成本。</span><span class="sxs-lookup"><span data-stu-id="ef81c-131">Cost tracking by workload owner name, environment, or both.</span></span>

## <a name="identity-management"></a><span data-ttu-id="ef81c-132">身分識別管理</span><span class="sxs-lookup"><span data-stu-id="ef81c-132">Identity management</span></span>

<span data-ttu-id="ef81c-133">在您可以設計治理模型中的身分識別管理之前，請務必了解它所包含的四個主要區域：</span><span class="sxs-lookup"><span data-stu-id="ef81c-133">Before you can design identity management for your governance model, it's important to understand the four major areas it encompasses:</span></span>

- <span data-ttu-id="ef81c-134">管理：建立、編輯和刪除使用者身分識別的程序和工具。</span><span class="sxs-lookup"><span data-stu-id="ef81c-134">Administration: the processes and tools for creating, editing, and deleting user identity.</span></span>
- <span data-ttu-id="ef81c-135">驗證：藉由驗證認證 (例如使用者名稱和密碼) 來驗證使用者身分識別。</span><span class="sxs-lookup"><span data-stu-id="ef81c-135">Authentication: verifying user identity by validating credentials, such as a user name and password.</span></span>
- <span data-ttu-id="ef81c-136">授權：決定通過驗證的使用者可以存取哪些資源，或者他們有權限可以執行哪些作業。</span><span class="sxs-lookup"><span data-stu-id="ef81c-136">Authorization: determining which resources an authenticated user is allowed to access or what operations they have permission to perform.</span></span>
- <span data-ttu-id="ef81c-137">稽核：定期檢閱記錄和其他資訊，以探索與使用者身分識別相關的安全性問題。</span><span class="sxs-lookup"><span data-stu-id="ef81c-137">Auditing: periodically reviewing logs and other information to discover security issues related to user identity.</span></span> <span data-ttu-id="ef81c-138">這包括檢閱可疑的使用模式、定期檢閱使用者權限以確認它們都正確，以及其他功能。</span><span class="sxs-lookup"><span data-stu-id="ef81c-138">This includes reviewing suspicious usage patterns, periodically reviewing user permissions to verify they are accurate, and other functions.</span></span>

<span data-ttu-id="ef81c-139">Azure 只信任一個服務的身分識別，那就是 Azure Active Directory (Azure AD)。</span><span class="sxs-lookup"><span data-stu-id="ef81c-139">There is only one service trusted by Azure for identity, and that is Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="ef81c-140">您會將使用者新增至 Azure AD，並且針對上述所有功能使用它。</span><span class="sxs-lookup"><span data-stu-id="ef81c-140">You'll be adding users to Azure AD and using it for all of the functions listed above.</span></span> <span data-ttu-id="ef81c-141">但是，在審視如何設定 Azure AD 之前，務必了解用來管理這些服務存取權的特殊權限帳戶。</span><span class="sxs-lookup"><span data-stu-id="ef81c-141">But before looking at how to configure Azure AD, it's important to understand the privileged accounts that are used to manage access to these services.</span></span>

<span data-ttu-id="ef81c-142">當貴組織已註冊 Azure 帳戶時，至少會指派一個 Azure **帳戶擁有者**。</span><span class="sxs-lookup"><span data-stu-id="ef81c-142">When your organization signed up for an Azure account, at least one Azure **account owner** was assigned.</span></span> <span data-ttu-id="ef81c-143">此外，已建立 Azure AD **租用戶**，除非現有租用戶已與貴組織使用 Office 365 等其他 Microsoft 服務相關聯。</span><span class="sxs-lookup"><span data-stu-id="ef81c-143">Also, an Azure AD **tenant** was created, unless an existing tenant was already associated with your organization's use of other Microsoft services such as Office 365.</span></span> <span data-ttu-id="ef81c-144">具有 Azure AD 租用戶完整權限的**全域管理員**，會在建立時產生關聯。</span><span class="sxs-lookup"><span data-stu-id="ef81c-144">A **global administrator** with full permissions on the Azure AD tenant was associated when it was created.</span></span>

<span data-ttu-id="ef81c-145">Azure 帳戶擁有者和 Azure AD 全域管理員的使用者身分識別，都會儲存在由 Microsoft 管理的高度安全身分識別系統。</span><span class="sxs-lookup"><span data-stu-id="ef81c-145">The user identities for both the Azure Account Owner and the Azure AD global administrator are stored in a highly secure identity system that is managed by Microsoft.</span></span> <span data-ttu-id="ef81c-146">Azure 帳戶擁有者已獲授權可以建立、更新和刪除訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="ef81c-146">The Azure Account Owner is authorized to create, update, and delete subscriptions.</span></span> <span data-ttu-id="ef81c-147">Azure AD 全域管理員已獲授權可以在 Azure AD 中執行許多動作，但是針對這個設計指南，您將著重於使用者身分識別的建立和刪除。</span><span class="sxs-lookup"><span data-stu-id="ef81c-147">The Azure AD global administrator is authorized to perform many actions in Azure AD, but for this design guide you'll focus on the creation and deletion of user identity.</span></span>

> [!NOTE]
> <span data-ttu-id="ef81c-148">如果有現有 Office 365 或 Intune 授權與您的帳戶相關聯，則貴組織可能已經有現有的 Azure AD 租用戶。</span><span class="sxs-lookup"><span data-stu-id="ef81c-148">Your organization may already have an existing Azure AD tenant if there's an existing Office 365 or Intune license associated with your account.</span></span>

<span data-ttu-id="ef81c-149">Azure 帳戶擁有者有權可以建立、更新和刪除訂用帳戶：</span><span class="sxs-lookup"><span data-stu-id="ef81c-149">The Azure Account Owner has permission to create, update, and delete subscriptions:</span></span>

<span data-ttu-id="ef81c-150">![具有 Azure 帳戶管理員和 Azure AD 全域管理員的 Azure 帳戶](../../_images/governance-3-0.png)
*圖 1.具有帳戶管理員和 Azure AD 全域管理員的 Azure 帳戶。*</span><span class="sxs-lookup"><span data-stu-id="ef81c-150">![Azure account with Azure Account Manager and Azure AD global admin](../../_images/governance-3-0.png)
*Figure 1. An Azure account with an Account Manager and Azure AD Global Administrator.*</span></span>

<span data-ttu-id="ef81c-151">Azure AD **全域管理員**有權可以建立使用者帳戶：</span><span class="sxs-lookup"><span data-stu-id="ef81c-151">The Azure AD **global administrator** has permission to create user accounts:</span></span>

<span data-ttu-id="ef81c-152">![具有 Azure 帳戶管理員和 Azure AD 全域管理員的 Azure 帳戶](../../_images/governance-3-0a.png)
*圖 2.Azure AD 全域管理員會在租用戶中建立必要的使用者帳戶。*</span><span class="sxs-lookup"><span data-stu-id="ef81c-152">![Azure account with Azure Account Manager and Azure AD global admin](../../_images/governance-3-0a.png)
*Figure 2. The Azure AD Global Administrator creates the required user accounts in the tenant.*</span></span>

<span data-ttu-id="ef81c-153">前兩個帳戶 **App1 工作負載擁有者**和 **App2 工作負載擁有者**，分別都與組織中負責管理工作負載的個人相關聯。</span><span class="sxs-lookup"><span data-stu-id="ef81c-153">The first two accounts, **App1 Workload Owner** and **App2 Workload Owner** are each associated with an individual in your organization responsible for managing a workload.</span></span> <span data-ttu-id="ef81c-154">**網路作業**帳戶是由負責共用基礎結構資源的個人所擁有。</span><span class="sxs-lookup"><span data-stu-id="ef81c-154">The **network operations** account is owned by the individual that is responsible for the shared infrastructure resources.</span></span> <span data-ttu-id="ef81c-155">最後，**訂用帳戶擁有者**帳戶是與負責訂用帳戶擁有權的個人相關聯。</span><span class="sxs-lookup"><span data-stu-id="ef81c-155">Finally, the **subscription owner** account is associated with the individual responsible for ownership of subscriptions.</span></span>

## <a name="resource-access-permissions-model-of-least-privilege"></a><span data-ttu-id="ef81c-156">最低權限的資源存取權限模型</span><span class="sxs-lookup"><span data-stu-id="ef81c-156">Resource access permissions model of least privilege</span></span>

<span data-ttu-id="ef81c-157">既然您已建立身分識別管理系統和使用者帳戶，您必須決定如何將角色型存取控制 (RBAC) 角色套用到每個帳戶，以支援最低權限的權限模型。</span><span class="sxs-lookup"><span data-stu-id="ef81c-157">Now that your identity management system and user accounts have been created, you have to decide how to apply role-based access control (RBAC) roles to each account to support a permissions model of least privilege.</span></span>

<span data-ttu-id="ef81c-158">其他需求指出與每個工作負載相關聯的資源要彼此隔離，這樣就不會有工作負載擁有者具備並非他們擁有的其他任何工作負載的管理存取權。</span><span class="sxs-lookup"><span data-stu-id="ef81c-158">There's another requirement stating the resources associated with each workload be isolated from one another such that no one workload owner has management access to any other workload they do not own.</span></span> <span data-ttu-id="ef81c-159">還有需求僅使用[適用於 Azure RBAC 的內建角色][rbac-built-in-roles]來實作這個模型。</span><span class="sxs-lookup"><span data-stu-id="ef81c-159">There's also a requirement to implement this model using only [built-in roles for Azure RBAC][rbac-built-in-roles].</span></span>

<span data-ttu-id="ef81c-160">每個 RBAC 角色會在 Azure 中三個範圍的其中一個套用：**訂用帳戶**、**資源群組**，然後是個別**資源**。</span><span class="sxs-lookup"><span data-stu-id="ef81c-160">Each RBAC role is applied at one of three scopes in Azure: **subscription**, **resource group**, then an individual **resource**.</span></span> <span data-ttu-id="ef81c-161">角色會在較低的範圍繼承。</span><span class="sxs-lookup"><span data-stu-id="ef81c-161">Roles are inherited at lower scopes.</span></span> <span data-ttu-id="ef81c-162">例如，如果使用者在訂用帳戶層級獲指派[內建擁有者角色][rbac-built-in-owner]，該角色也會在資源群組和個別資源層級指派給該使用者，除非已覆寫。</span><span class="sxs-lookup"><span data-stu-id="ef81c-162">For example, if a user is assigned the [built-in owner role][rbac-built-in-owner] at the subscription level, that role is also assigned to that user at the resource group and individual resource level unless it's overridden.</span></span>

<span data-ttu-id="ef81c-163">因此，若要建立最低權限的模型，您必須決定特定類型使用者在這三個範圍中分別可以採取的動作。</span><span class="sxs-lookup"><span data-stu-id="ef81c-163">Therefore, to create a model of least privilege access you have to decide the actions a particular type of user is allowed to take at each of these three scopes.</span></span> <span data-ttu-id="ef81c-164">例如，需求是工作負載擁有者僅有權可以管理與他們的工作負載相關聯的資源，無法管理其他工作負載。</span><span class="sxs-lookup"><span data-stu-id="ef81c-164">For example, the requirement is for a workload owner to have permission to manage access to only the resources associated with their workload and no others.</span></span> <span data-ttu-id="ef81c-165">如果您在訂用帳戶範圍指派[內建擁有者角色][rbac-built-in-owner]，每個工作負載擁有者都會具有所有工作負載的管理存取權。</span><span class="sxs-lookup"><span data-stu-id="ef81c-165">If you were to assign the [built-in owner role][rbac-built-in-owner] at the subscription scope, each workload owner would have management access to all workloads.</span></span>

<span data-ttu-id="ef81c-166">讓我們看看兩個範例權限模型，再稍微了解這個概念。</span><span class="sxs-lookup"><span data-stu-id="ef81c-166">Let's take a look at two example permission models to understand this concept a little better.</span></span> <span data-ttu-id="ef81c-167">在第一個範例中，模型只信任服務管理員來建立資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-167">In the first example, the model trusts only the service administrator to create resource groups.</span></span> <span data-ttu-id="ef81c-168">在第二個範例中，模型在訂用帳戶範圍將內建擁有者角色指派給每個工作負載擁有者。</span><span class="sxs-lookup"><span data-stu-id="ef81c-168">In the second example, the model assigns the built-in owner role to each workload owner at the subscription scope.</span></span>

<span data-ttu-id="ef81c-169">在這兩個範例中，有訂用帳戶服務管理員在訂用帳戶範圍獲指派[內建擁有者角色][rbac-built-in-owner]。</span><span class="sxs-lookup"><span data-stu-id="ef81c-169">In both examples, there is a subscription service administrator that is assigned the [built-in owner role][rbac-built-in-owner] at the subscription scope.</span></span> <span data-ttu-id="ef81c-170">請回想[內建擁有者角色][rbac-built-in-owner]會授與所有權限，包括資源存取權的管理。</span><span class="sxs-lookup"><span data-stu-id="ef81c-170">Recall that the [built-in owner role][rbac-built-in-owner] grants all permissions including the management of access to resources.</span></span>
<span data-ttu-id="ef81c-171">![具有擁有者角色的訂用帳戶服務管理員](../../_images/governance-2-1.png)
*圖 3.訂用帳戶，具有獲指派內建擁有者角色的服務管理員。*</span><span class="sxs-lookup"><span data-stu-id="ef81c-171">![subscription service administrator with owner role](../../_images/governance-2-1.png)
*Figure 3. A subscription with a service administrator assigned the built-in owner role.*</span></span>

1. <span data-ttu-id="ef81c-172">在第一個範例中，有**工作負載擁有者 A**，他們沒有訂用帳戶範圍的任何權限，也就是預設沒有資源存取權管理權限。</span><span class="sxs-lookup"><span data-stu-id="ef81c-172">In the first example, there is **workload owner A** with no permissions at the subscription scope - they have no resource access management rights by default.</span></span> <span data-ttu-id="ef81c-173">此使用者想要為其工作負載部署和管理資源。</span><span class="sxs-lookup"><span data-stu-id="ef81c-173">This user wants to deploy and manage the resources for their workload.</span></span> <span data-ttu-id="ef81c-174">他們必須連絡**服務管理員**以要求建立資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-174">They must contact the **service administrator** to request creation of a resource group.</span></span>
    <span data-ttu-id="ef81c-175">![工作負載擁有者要求建立資源群組 A](../../_images/governance-2-2.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-175">![workload owner requests creation of resource group A](../../_images/governance-2-2.png)</span></span>
2. <span data-ttu-id="ef81c-176">**服務管理員**檢閱其要求，並且建立**資源群組 A**。此時，**工作負載擁有者 A** 仍然沒有執行任何動作的權限。</span><span class="sxs-lookup"><span data-stu-id="ef81c-176">The **service administrator** reviews their request and creates **resource group A**. At this point, **workload owner A** still doesn't have permission to do anything.</span></span>
    <span data-ttu-id="ef81c-177">![服務管理員建立資源群組 A](../../_images/governance-2-3.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-177">![service administrator creates resource group A](../../_images/governance-2-3.png)</span></span>
3. <span data-ttu-id="ef81c-178">**服務管理員**將**工作負載擁有者 A** 新增至**資源群組 A**，並指派[內建參與者角色](/azure/role-based-access-control/built-in-roles#contributor)。</span><span class="sxs-lookup"><span data-stu-id="ef81c-178">The **service administrator** adds **workload owner A** to **resource group A** and assigns the [built-in contributor role](/azure/role-based-access-control/built-in-roles#contributor).</span></span> <span data-ttu-id="ef81c-179">參與者角色授與**資源群組 A** 的所有權限，管理存取權限除外。</span><span class="sxs-lookup"><span data-stu-id="ef81c-179">The contributor role grants all permissions on **resource group A** except managing access permission.</span></span>
    <span data-ttu-id="ef81c-180">![服務管理員將工作負載擁有者新增至資源群組 A](../../_images/governance-2-4.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-180">![service administrator adds workload owner a to resource group a](../../_images/governance-2-4.png)</span></span>
4. <span data-ttu-id="ef81c-181">假設**工作負載擁有者 A** 具有需求，需要小組成員配對在工作負載容量規劃時，檢視 CPU 和網路流量監視資料。</span><span class="sxs-lookup"><span data-stu-id="ef81c-181">Let's assume that **workload owner A** has a requirement for a pair of team members to view the CPU and network traffic monitoring data as part of capacity planning for the workload.</span></span> <span data-ttu-id="ef81c-182">因為**工作負載擁有者 A** 獲指派參與者角色，他們沒有權限可以將使用者新增至**資源群組 A**。他們必須將此要求傳送給**服務管理員**。</span><span class="sxs-lookup"><span data-stu-id="ef81c-182">Because **workload owner A** is assigned the contributor role, they do not have permission to add a user to **resource group A**. They must send this request to the **service administrator**.</span></span>
    <span data-ttu-id="ef81c-183">![工作負載擁有者要求將工作負載參與者新增至資源群組](../../_images/governance-2-5.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-183">![workload owner requests workload contributors be added to resource group](../../_images/governance-2-5.png)</span></span>
5. <span data-ttu-id="ef81c-184">**服務管理員**檢閱要求，並且將兩個**工作負載參與者**使用者新增至**資源群組 A**。這兩個使用者都不需要管理資源的權限，因此指派[內建讀者角色](/azure/role-based-access-control/built-in-roles#contributor)給他們。</span><span class="sxs-lookup"><span data-stu-id="ef81c-184">The **service administrator** reviews the request, and adds the two **workload contributor** users to **resource group A**. Neither of these two users require permission to manage resources, so they are assigned the [built-in reader role](/azure/role-based-access-control/built-in-roles#contributor).</span></span>
    <span data-ttu-id="ef81c-185">![服務管理員將工作負載參與者新增至資源群組 A](../../_images/governance-2-6.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-185">![service administrator adds workload contributors to resource group A](../../_images/governance-2-6.png)</span></span>
6. <span data-ttu-id="ef81c-186">接下來，**工作負載擁有者 B** 也需要資源群組包含其工作負載的資源。</span><span class="sxs-lookup"><span data-stu-id="ef81c-186">Next, **workload owner B** also requires a resource group to contain the resources for their workload.</span></span> <span data-ttu-id="ef81c-187">如同**工作負載擁有者 A**，**工作負載擁有者 B** 最初沒有在訂用帳戶範圍採取任何動作的權限，因此他們必須將要求傳送給**服務管理員**。</span><span class="sxs-lookup"><span data-stu-id="ef81c-187">As with **workload owner A**, **workload owner B** initially does not have permission to take any action at the subscription scope so they must send a request to the **service administrator**.</span></span>
    <span data-ttu-id="ef81c-188">![工作負載擁有者 B 要求建立資源群組 B](../../_images/governance-2-7.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-188">![workload owner B requests creation of resource group B](../../_images/governance-2-7.png)</span></span>
7. <span data-ttu-id="ef81c-189">**服務管理員**檢閱要求，並且建立**資源群組 B**。![服務管理員建立資源群組 B](../../_images/governance-2-8.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-189">The **service administrator** reviews the request and creates **resource group B**.  ![Service Administrator creates resource group B](../../_images/governance-2-8.png)</span></span>
8. <span data-ttu-id="ef81c-190">然後**服務管理員**將**工作負載擁有者 B** 新增至**資源群組 B**，並指派[內建參與者角色](/azure/role-based-access-control/built-in-roles#contributor)。</span><span class="sxs-lookup"><span data-stu-id="ef81c-190">The **service administrator** then adds **workload owner B** to **resource group B** and assigns the [built-in contributor role](/azure/role-based-access-control/built-in-roles#contributor).</span></span>
    <span data-ttu-id="ef81c-191">![服務管理員將工作負載擁有者 B 新增至資源群組 B](../../_images/governance-2-9.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-191">![Service Administrator adds Workload Owner B to resource group B](../../_images/governance-2-9.png)</span></span>

<span data-ttu-id="ef81c-192">此時，每個工作負載擁有者會在本身的資源群組中隔離。</span><span class="sxs-lookup"><span data-stu-id="ef81c-192">At this point, each of the workload owners is isolated in their own resource group.</span></span> <span data-ttu-id="ef81c-193">工作負載擁有者或其小組成員都沒有任何其他資源群組中資源的管理存取權。</span><span class="sxs-lookup"><span data-stu-id="ef81c-193">None of the workload owners or their team members have management access to the resources in any other resource group.</span></span>

<span data-ttu-id="ef81c-194">![具有資源群組 A 和 B 的訂用帳戶](../../_images/governance-2-10.png)
*圖 4.具有兩個工作負載擁有者與其本身資源群組隔離的訂用帳戶。*</span><span class="sxs-lookup"><span data-stu-id="ef81c-194">![subscription with resource groups A and B](../../_images/governance-2-10.png)
*Figure 4. A subscription with two workload owners isolated with their own resource group.*</span></span>

<span data-ttu-id="ef81c-195">此模型是最低權限模型，每個使用者在正確的資源管理範圍獲指派正確的權限。</span><span class="sxs-lookup"><span data-stu-id="ef81c-195">This model is a least privilege model - each user is assigned the correct permission at the correct resource management scope.</span></span>

<span data-ttu-id="ef81c-196">不過，請考量到此範例中的每項工作都是由**服務管理員**執行。</span><span class="sxs-lookup"><span data-stu-id="ef81c-196">However, consider that every task in this example was performed by the **service administrator**.</span></span> <span data-ttu-id="ef81c-197">雖然這是簡單的範例而且可能不會造成問題，但是因為只有兩個工作負載擁有者，所以不難想像對於大型組織會造成的問題類型。</span><span class="sxs-lookup"><span data-stu-id="ef81c-197">While this is a simple example and may not appear to be an issue because there were only two workload owners, it's easy to imagine the types of issues that would result for a large organization.</span></span> <span data-ttu-id="ef81c-198">例如，**服務管理員**成為瓶頸，具有導致延遲的大量要求待處理項目。</span><span class="sxs-lookup"><span data-stu-id="ef81c-198">For example, the **service administrator** can become a bottleneck with a large backlog of requests that result in delays.</span></span>

<span data-ttu-id="ef81c-199">讓我們看看第二個範例，其中減少了由**服務管理員**執行的工作數目。</span><span class="sxs-lookup"><span data-stu-id="ef81c-199">Let's take a look at second example that reduces the number of tasks performed by the **service administrator**.</span></span>

1. <span data-ttu-id="ef81c-200">在此模型中，**工作負載擁有者 A** 在訂用帳戶範圍獲指派[內建擁有者角色][rbac-built-in-owner]，讓他們可以建立自己的資源群組：**資源群組 A**。![服務管理員將工作負載擁有者 A 新增至訂用帳戶](../../_images/governance-2-11.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-200">In this model, **workload owner A** is assigned the [built-in owner role][rbac-built-in-owner] at the subscription scope, enabling them to create their own resource group: **resource group A**.  ![Service Administrator adds Workload Owner A to subscription](../../_images/governance-2-11.png)</span></span>
2. <span data-ttu-id="ef81c-201">當**資源群組 A** 建立時，**工作負載擁有者 A** 預設會新增，並且從訂用帳戶範圍繼承[內建擁有者][rbac-built-in-owner]角色。</span><span class="sxs-lookup"><span data-stu-id="ef81c-201">When **resource group A** is created, **workload owner A** is added by default and inherits the [built-in owner][rbac-built-in-owner] role from the subscription scope.</span></span>
    <span data-ttu-id="ef81c-202">![工作負載擁有者 A 建立資源群組 A](../../_images/governance-2-12.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-202">![Workload Owner A creates resource group A](../../_images/governance-2-12.png)</span></span>
3. <span data-ttu-id="ef81c-203">[內建擁有者角色][rbac-built-in-owner]授與**工作負載擁有者 A** 管理資源群組存取權的權限。</span><span class="sxs-lookup"><span data-stu-id="ef81c-203">The [built-in owner role][rbac-built-in-owner] grants **workload owner A** permission to manage access to the resource group.</span></span> <span data-ttu-id="ef81c-204">**工作負載擁有者 A** 新增兩個**工作負載參與者**，並指派[內建讀者角色][rbac-built-in-owner]給每個參與者。</span><span class="sxs-lookup"><span data-stu-id="ef81c-204">**Workload owner A** adds two **workload contributors** and assigns the [built-in reader role][rbac-built-in-owner] to each of them.</span></span>
    <span data-ttu-id="ef81c-205">![工作負載擁有者 A 新增工作負載參與者](../../_images/governance-2-13.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-205">![Workload Owner A adds Workload Contributors](../../_images/governance-2-13.png)</span></span>
4. <span data-ttu-id="ef81c-206">**服務管理員**現在將**工作負載擁有者 B** 新增至具有內建擁有者角色的訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="ef81c-206">**Service administrator** now adds **workload owner B** to the subscription with the built-in owner role.</span></span>
    <span data-ttu-id="ef81c-207">![服務管理員將工作負載擁有者 B 新增至訂用帳戶](../../_images/governance-2-14.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-207">![Service Administrator adds Workload Owners B to subscription](../../_images/governance-2-14.png)</span></span>
5. <span data-ttu-id="ef81c-208">**工作負載擁有者 B** 建立**資源群組 B**，預設會新增。</span><span class="sxs-lookup"><span data-stu-id="ef81c-208">**Workload owner B** creates **resource group B** and is added by default.</span></span> <span data-ttu-id="ef81c-209">同樣地，**工作負載擁有者 B** 會從訂用帳戶範圍繼承內建擁有者角色。</span><span class="sxs-lookup"><span data-stu-id="ef81c-209">Again, **workload owner B** inherits the built-in owner role from the subscription scope.</span></span>
    <span data-ttu-id="ef81c-210">![工作負載擁有者 B 建立資源群組 B](../../_images/governance-2-15.png)</span><span class="sxs-lookup"><span data-stu-id="ef81c-210">![Workload Owner B creates resource group B](../../_images/governance-2-15.png)</span></span>

<span data-ttu-id="ef81c-211">請注意，在此模型中，**服務管理員**執行的動作比在第一個範例中還要少，原因是將管理存取權委派給個別的工作負載擁有者。</span><span class="sxs-lookup"><span data-stu-id="ef81c-211">Note that in this model, the **service administrator** performed fewer actions than they did in the first example due to the delegation of management access to each of the individual workload owners.</span></span>

<span data-ttu-id="ef81c-212">![具有資源群組 A 和 B 的訂用帳戶](../../_images/governance-2-16.png)
*圖 5.訂用帳戶，具有服務管理員和兩個工作負載擁有者，都獲指派內建擁有者角色。*</span><span class="sxs-lookup"><span data-stu-id="ef81c-212">![subscription with resource groups A and B](../../_images/governance-2-16.png)
*Figure 5. A subscription with a service administrator and two workload owners, all assigned the built-in owner role.*</span></span>

<span data-ttu-id="ef81c-213">不過，因為**工作負載擁有者 A** 和**工作負載擁有者 B** 都在訂用帳戶範圍獲指派內建擁有者角色，他們各自都繼承彼此資源群組的內建擁有者角色。</span><span class="sxs-lookup"><span data-stu-id="ef81c-213">However, because both **workload owner A** and **workload owner B** are assigned the built-in owner role at the subscription scope, they have each inherited the built-in owner role for each other's resource group.</span></span> <span data-ttu-id="ef81c-214">這表示他們不只有其他資源的完整存取權，他們還可以將管理存取權委派給彼此的資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-214">This means that not only do they have full access to one another's resources, they are also able to delegate management access to each other's resource groups.</span></span> <span data-ttu-id="ef81c-215">例如，**工作負載擁有者 B** 有權可以將任何其他使用者新增至**資源群組 A**，並且可以將任何角色指派給它們，包括內建擁有者角色。</span><span class="sxs-lookup"><span data-stu-id="ef81c-215">For example, **workload owner B** has rights to add any other user to **resource group A** and can assign any role to them, including the built-in owner role.</span></span>

<span data-ttu-id="ef81c-216">如果將每個範例與需求相互比較，您會看到這兩個範例都支援在訂用帳戶範圍的單一信任使用者，有權可以將資源存取權限授與兩個工作負載擁有者。</span><span class="sxs-lookup"><span data-stu-id="ef81c-216">If you compare each example to the requirements, you'll see that both examples support a single trusted user at the subscription scope with permission to grant resource access rights to the two workload owners.</span></span> <span data-ttu-id="ef81c-217">這兩個工作負載擁有者預設都沒有資源管理存取權，需要**服務管理員**明確地將權限指派給他們。</span><span class="sxs-lookup"><span data-stu-id="ef81c-217">Each of the two workload owners did not have access to resource management by default and required the **service administrator** to explicitly assign permissions to them.</span></span> <span data-ttu-id="ef81c-218">不過，只有第一個範例支援與每個工作負載相關聯的資源要彼此隔離的需求，如此才沒有任何工作負載擁有者具有任何其他工作負載的資源存取權。</span><span class="sxs-lookup"><span data-stu-id="ef81c-218">However, only the first example supports the requirement that the resources associated with each workload are isolated from one another such that no workload owner has access to the resources of any other workload.</span></span>

## <a name="resource-management-model"></a><span data-ttu-id="ef81c-219">資源管理模型</span><span class="sxs-lookup"><span data-stu-id="ef81c-219">Resource management model</span></span>

<span data-ttu-id="ef81c-220">既然您已經設計最低權限的權限模型，讓我們繼續查看這些治理模型的一些實際應用。</span><span class="sxs-lookup"><span data-stu-id="ef81c-220">Now that you've designed a permissions model of least privilege, let's move on to take a look at some practical applications of these governance models.</span></span> <span data-ttu-id="ef81c-221">請回想需求，您必須支援下列三種環境：</span><span class="sxs-lookup"><span data-stu-id="ef81c-221">Recall from the requirements that you must support the following three environments:</span></span>

1. <span data-ttu-id="ef81c-222">**共用基礎結構：** 所有工作負載共用的單一群組資源。</span><span class="sxs-lookup"><span data-stu-id="ef81c-222">**Shared infrastructure:** a single group of resources shared by all workloads.</span></span> <span data-ttu-id="ef81c-223">這些資源是網路閘道、防火牆和安全性服務等等。</span><span class="sxs-lookup"><span data-stu-id="ef81c-223">These are resources such as network gateways, firewalls, and security services.</span></span>
2. <span data-ttu-id="ef81c-224">**開發：** 代表多個非生產就緒工作負載的多個資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-224">**Development:** multiple groups of resources representing multiple non-production ready workloads.</span></span> <span data-ttu-id="ef81c-225">這些資源用於概念證明、測試及其他開發人員活動。</span><span class="sxs-lookup"><span data-stu-id="ef81c-225">These resources are used for proof-of-concept, testing, and other developer activities.</span></span> <span data-ttu-id="ef81c-226">這些資源可能會有比較寬鬆的治理模型，以便增加開發人員的靈活度。</span><span class="sxs-lookup"><span data-stu-id="ef81c-226">These resources may have a more relaxed governance model to enable increased developer agility.</span></span>
3. <span data-ttu-id="ef81c-227">**生產：** 代表多個生產工作負載的多個資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-227">**Production:** multiple groups of resources representing multiple production workloads.</span></span> <span data-ttu-id="ef81c-228">這些資源是用來裝載私人和公用對向的應用程式成品。</span><span class="sxs-lookup"><span data-stu-id="ef81c-228">These resources are used to host the private and public facing application artifacts.</span></span> <span data-ttu-id="ef81c-229">這些資源通常有最嚴謹的治理和安全性模型，以防止未經授權存取資源、應用程式程式碼和資料。</span><span class="sxs-lookup"><span data-stu-id="ef81c-229">These resources typically have the tightest governance and security models to protect the resources, application code, and data from unauthorized access.</span></span>

<span data-ttu-id="ef81c-230">針對這三種環境，需要依**工作負載擁有者**、**環境**或兩者來追蹤成本資料。</span><span class="sxs-lookup"><span data-stu-id="ef81c-230">For each of these three environments, there is a requirement to track cost data by **workload owner**, **environment**, or both.</span></span> <span data-ttu-id="ef81c-231">也就是說，您想要知道**共用基礎結構**的進行中成本，**開發**和**生產**環境中個人所產生的成本，最後是**開發**和**生產**的整體成本。</span><span class="sxs-lookup"><span data-stu-id="ef81c-231">That is, you'll want to know the ongoing cost of the **shared infrastructure**, the costs incurred by individuals in both the **development** and **production** environments, and finally the overall cost of **development** and **production**.</span></span>

<span data-ttu-id="ef81c-232">您已了解資源分成兩個層級：**訂用帳戶**和**資源群組**。</span><span class="sxs-lookup"><span data-stu-id="ef81c-232">You have already learned that resources are scoped to two levels: **subscription** and **resource group**.</span></span> <span data-ttu-id="ef81c-233">因此，第一個決策是如何依據**訂用帳戶**來組織環境。</span><span class="sxs-lookup"><span data-stu-id="ef81c-233">Therefore, the first decision is how to organize environments by **subscription**.</span></span> <span data-ttu-id="ef81c-234">只有兩種可能性：單一訂用帳戶或多個訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="ef81c-234">There are only two possibilities: a single subscription, or, multiple subscriptions.</span></span>

<span data-ttu-id="ef81c-235">在您查看每個模型的範例之前，讓我們檢閱 Azure 中訂用帳戶的管理結構。</span><span class="sxs-lookup"><span data-stu-id="ef81c-235">Before you look at examples of each of these models, let's review the management structure for subscriptions in Azure.</span></span>

<span data-ttu-id="ef81c-236">請回想需求，您在組織中有個人負責訂用帳戶，這個使用者擁有 Azure AD 租用戶中的**訂用帳戶擁有者**帳戶。</span><span class="sxs-lookup"><span data-stu-id="ef81c-236">Recall from the requirements that you have an individual in the organization who is responsible for subscriptions, and this user owns the **subscription owner** account in the Azure AD tenant.</span></span> <span data-ttu-id="ef81c-237">不過，此帳戶沒有建立訂用帳戶的權限。</span><span class="sxs-lookup"><span data-stu-id="ef81c-237">However, this account does not have permission to create subscriptions.</span></span> <span data-ttu-id="ef81c-238">只有 **Azure 帳戶擁有者**有權執行這個操作：</span><span class="sxs-lookup"><span data-stu-id="ef81c-238">Only the **Azure Account Owner** has permission to do this:</span></span>

<span data-ttu-id="ef81c-239">![Azure 帳戶擁有者建立訂用帳戶](../../_images/governance-3-0b.png)
*圖 6。Azure 帳戶擁有者建立訂用帳戶。*</span><span class="sxs-lookup"><span data-stu-id="ef81c-239">![An Azure Account Owner creates a subscription](../../_images/governance-3-0b.png)
*Figure 6. An Azure Account Owner creates a subscription.*</span></span>

<span data-ttu-id="ef81c-240">一旦建立訂用帳戶，**Azure 帳戶擁有者**可以將**訂用帳戶擁有者**帳戶新增至具有**擁有者**角色的訂用帳戶：</span><span class="sxs-lookup"><span data-stu-id="ef81c-240">Once the subscription has been created, the **Azure Account Owner** can add the **subscription owner** account to the subscription with the **owner** role:</span></span>

<span data-ttu-id="ef81c-241">![Azure 帳戶擁有者將訂用帳戶擁有者使用者帳戶新增至具有擁有者角色的訂用帳戶。](../../_images/governance-3-0c.png)
*圖 7。Azure 帳戶擁有者將**訂用帳戶擁有者**使用者帳戶新增至具有**擁有者**角色的訂用帳戶。*</span><span class="sxs-lookup"><span data-stu-id="ef81c-241">![The Azure Account Owner adds the subscription owner user account to the subscription with the owner role.](../../_images/governance-3-0c.png)
*Figure 7. The Azure Account Owner adds the **subscription owner** user account to the subscription with the **owner** role.*</span></span>

<span data-ttu-id="ef81c-242">**訂用帳戶擁有者**現在可以建立**資源群組**，並且委派資源存取權管理。</span><span class="sxs-lookup"><span data-stu-id="ef81c-242">The **subscription owner** can now create **resource groups** and delegate resource access management.</span></span>

<span data-ttu-id="ef81c-243">首先讓我們看看使用單一訂用帳戶的範例資源管理模型。</span><span class="sxs-lookup"><span data-stu-id="ef81c-243">First let's look at an example resource management model using a single subscription.</span></span> <span data-ttu-id="ef81c-244">第一個決策是如何將資源群組對齊至三個環境。</span><span class="sxs-lookup"><span data-stu-id="ef81c-244">The first decision is how to align resource groups to the three environments.</span></span> <span data-ttu-id="ef81c-245">您有兩個選擇：</span><span class="sxs-lookup"><span data-stu-id="ef81c-245">You have two options:</span></span>

1. <span data-ttu-id="ef81c-246">將每個環境對齊至單一資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-246">Align each environment to a single resource group.</span></span> <span data-ttu-id="ef81c-247">所有共用基礎結構資源會部署到單一**共用基礎結構**資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-247">All shared infrastructure resources are deployed to a single **shared infrastructure** resource group.</span></span> <span data-ttu-id="ef81c-248">與開發工作負載相關聯的所有資源都會部署到單一**開發**資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-248">All resources associated with development workloads are deployed to a single **development** resource group.</span></span> <span data-ttu-id="ef81c-249">與生產工作負載相關聯的所有資源都會都部署到**生產**環境的單一**生產**資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-249">All resources associated with production workloads are deployed into a single **production** resource group for the **production** environment.</span></span>
2. <span data-ttu-id="ef81c-250">建立每個工作負載的個別資源群組，使用命名慣例和標記來對齊資源群組與三個環境。</span><span class="sxs-lookup"><span data-stu-id="ef81c-250">Create separate resource groups for each workload, using a naming convention and tags to align resource groups with each of the three environments.</span></span>

<span data-ttu-id="ef81c-251">讓我們從評估第一個選項開始。</span><span class="sxs-lookup"><span data-stu-id="ef81c-251">Let's begin by evaluating the first option.</span></span> <span data-ttu-id="ef81c-252">您將會使用我們在上一節中討論的權限模型，以及單一訂用帳戶服務管理員，他會建立資源群組並且將使用者新增至其中，具有內建**參與者**或**讀者**角色。</span><span class="sxs-lookup"><span data-stu-id="ef81c-252">You'll be using the permissions model that was discussed in the previous section, with a single subscription service administrator who creates resource groups and adds users to them with either the built-in **contributor** or **reader** role.</span></span>

1. <span data-ttu-id="ef81c-253">所部署的第一個資源群組代表**共用基礎結構**環境。</span><span class="sxs-lookup"><span data-stu-id="ef81c-253">The first resource group deployed represents the **shared infrastructure** environment.</span></span> <span data-ttu-id="ef81c-254">**訂用帳戶擁有者**會為名為 `netops-shared-rg` 的共用基礎結構資源建立資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-254">The **subscription owner** creates a resource group for the shared infrastructure resources named `netops-shared-rg`.</span></span>
    ![](../../_images/governance-3-0d.png)
2. <span data-ttu-id="ef81c-255">**訂用帳戶擁有者**會將**網路作業使用者**帳戶新增至資源群組，並且指派**參與者**角色。</span><span class="sxs-lookup"><span data-stu-id="ef81c-255">The **subscription owner** adds the **network operations user** account to the resource group and assigns the **contributor** role.</span></span>
    ![](../../_images/governance-3-0e.png)
3. <span data-ttu-id="ef81c-256">**網路作業使用者**會建立 [VPN 閘道](/azure/vpn-gateway/vpn-gateway-about-vpngateways)，並且設定它來連線到內部部署 VPN 設備。</span><span class="sxs-lookup"><span data-stu-id="ef81c-256">The **network operations user** creates a [VPN gateway](/azure/vpn-gateway/vpn-gateway-about-vpngateways) and configures it to connect to the on-premises VPN appliance.</span></span> <span data-ttu-id="ef81c-257">**網路作業**使用者也會將一組[標記](/azure/azure-resource-manager/resource-group-using-tags)套用至每個資源：environment:shared 和 managedBy:netOps。</span><span class="sxs-lookup"><span data-stu-id="ef81c-257">The **network operations** user also applies a pair of [tags](/azure/azure-resource-manager/resource-group-using-tags) to each of the resources: *environment:shared* and *managedBy:netOps*.</span></span> <span data-ttu-id="ef81c-258">當**訂用帳戶服務管理員**匯出成本報告時，成本會與每個標記對齊。</span><span class="sxs-lookup"><span data-stu-id="ef81c-258">When the **subscription service administrator** exports a cost report, costs will be aligned with each of these tags.</span></span> <span data-ttu-id="ef81c-259">這可讓**訂用帳戶服務管理員**使用 environment 標記和 managedBy 標記來樞紐成本。</span><span class="sxs-lookup"><span data-stu-id="ef81c-259">This allows the **subscription service administrator** to pivot costs using the *environment* tag and the *managedBy* tag.</span></span> <span data-ttu-id="ef81c-260">請注意圖表右上方的**資源限制**計數器。</span><span class="sxs-lookup"><span data-stu-id="ef81c-260">Notice the **resource limits** counter at the top right-hand side of the figure.</span></span> <span data-ttu-id="ef81c-261">每個 Azure 訂用帳戶具有[服務限制](/azure/azure-subscription-service-limits)，為了協助您了解這些限制的影響，您將遵循每個訂用帳戶的虛擬網路限制。</span><span class="sxs-lookup"><span data-stu-id="ef81c-261">Each Azure subscription has [service limits](/azure/azure-subscription-service-limits), and to help you understand the effect of these limits you'll follow the virtual network limit for each subscription.</span></span> <span data-ttu-id="ef81c-262">每個訂用帳戶的限制為 1000 個虛擬網路，在部署第一個虛擬網路之後，目前有 999 個可用。</span><span class="sxs-lookup"><span data-stu-id="ef81c-262">There is a limit of 1000 virtual networks per subscription, and after the first virtual network is deployed there are now 999 available.</span></span>
    ![](../../_images/governance-3-1.png)
4. <span data-ttu-id="ef81c-263">部署了另外兩個資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-263">Two more resource groups are deployed.</span></span> <span data-ttu-id="ef81c-264">第一個名為 `prod-rg`。</span><span class="sxs-lookup"><span data-stu-id="ef81c-264">The first is named `prod-rg`.</span></span> <span data-ttu-id="ef81c-265">此資源群組會與生產環境對齊。</span><span class="sxs-lookup"><span data-stu-id="ef81c-265">This resource group is aligned with the production environment.</span></span> <span data-ttu-id="ef81c-266">第二個資源群組的名稱是 `dev-rg`，會與開發環境對齊。</span><span class="sxs-lookup"><span data-stu-id="ef81c-266">The second is named `dev-rg` and is aligned with the development environment.</span></span> <span data-ttu-id="ef81c-267">與生產工作負載相關聯的所有資源都會部署至生產環境，與開發工作負載相關聯的所有資源都會部署至開發環境。</span><span class="sxs-lookup"><span data-stu-id="ef81c-267">All resources associated with production workloads are deployed to the production environment and all resources associated with development workloads are deployed to the development environment.</span></span> <span data-ttu-id="ef81c-268">在此範例中，您只會將兩個工作負載部署到這兩個環境，這樣我們就不會遇到任何 Azure 訂用帳戶服務限制。</span><span class="sxs-lookup"><span data-stu-id="ef81c-268">In this example, you'll only deploy two workloads to each of these two environments, so you won't encounter any Azure subscription service limits.</span></span> <span data-ttu-id="ef81c-269">不過，請考慮每個資源群組具有 800 個資源的限制。</span><span class="sxs-lookup"><span data-stu-id="ef81c-269">However, consider that each resource group has a limit of 800 resources per resource group.</span></span> <span data-ttu-id="ef81c-270">如果您繼續向每個資源群組加入工作負載，最終會達到此限制。</span><span class="sxs-lookup"><span data-stu-id="ef81c-270">If you continue to add workloads to each resource group, eventually this limit will be reached.</span></span>
    ![](../../_images/governance-3-2.png)
5. <span data-ttu-id="ef81c-271">第一個**工作負載擁有者**會將要求傳送給**訂用帳戶服務管理員**，並且新增至每個開發和生產環境中具有**參與者**角色的資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-271">The first **workload owner** sends a request to the **subscription service administrator** and is added to each of the development and production environment resource groups with the **contributor** role.</span></span> <span data-ttu-id="ef81c-272">如同您先前所了解的，**參與者**角色允許使用者執行除了指派角色給其他使用者以外的任何作業。</span><span class="sxs-lookup"><span data-stu-id="ef81c-272">As you learned earlier, the **contributor** role allows the user to perform any operation other than assigning a role to another user.</span></span> <span data-ttu-id="ef81c-273">第一個**工作負載擁有者**現在可以建立與其工作負載相關聯的資源。</span><span class="sxs-lookup"><span data-stu-id="ef81c-273">The first **workload owner** can now create the resources associated with their workload.</span></span>
    ![](../../_images/governance-3-3.png)
6. <span data-ttu-id="ef81c-274">第一個**工作負載擁有者**會在其中包含一組虛擬機器的兩個資源群組中，建立虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="ef81c-274">The first **workload owner** creates a virtual network in each of the two resource groups with a pair of virtual machines in each.</span></span> <span data-ttu-id="ef81c-275">第一個**工作負載擁有者**會將 environment 和 managedBy 標記套用至所有資源。</span><span class="sxs-lookup"><span data-stu-id="ef81c-275">The first **workload owner** applies the *environment* and *managedBy* tags to all resources.</span></span> <span data-ttu-id="ef81c-276">請注意，Azure 服務限制計數器現在剩餘 997 個虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="ef81c-276">Note that the Azure service limit counter is now at 997 virtual networks remaining.</span></span>
    ![](../../_images/governance-3-4.png)
7. <span data-ttu-id="ef81c-277">每個虛擬網路在建立時，並沒有與內部部署的連線。</span><span class="sxs-lookup"><span data-stu-id="ef81c-277">Each of the virtual networks does not have connectivity to on-premises when they are created.</span></span> <span data-ttu-id="ef81c-278">在這種類型的架構中，每個虛擬網路必須對等互連至**共用基礎結構**環境中的 hub-vnet。</span><span class="sxs-lookup"><span data-stu-id="ef81c-278">In this type of architecture, each virtual network must be peered to the *hub-vnet* in the **shared infrastructure** environment.</span></span> <span data-ttu-id="ef81c-279">虛擬網路對等互連會建立兩個不同虛擬網路之間的連線，並且允許網路流量在兩者之間傳送。</span><span class="sxs-lookup"><span data-stu-id="ef81c-279">Virtual network peering creates a connection between two separate virtual networks and allows network traffic to travel between them.</span></span> <span data-ttu-id="ef81c-280">請注意，虛擬網路對等互連原本並非可轉移。</span><span class="sxs-lookup"><span data-stu-id="ef81c-280">Note that virtual network peering is not inherently transitive.</span></span> <span data-ttu-id="ef81c-281">必須在已連線的兩個虛擬網路其中一個指定對等互連，且只有在其中一個虛擬網路指定對等互連時，連線才會完成。</span><span class="sxs-lookup"><span data-stu-id="ef81c-281">A peering must be specified in each of the two virtual networks that are connected, and if only one of the virtual networks specifies a peering the connection is incomplete.</span></span> <span data-ttu-id="ef81c-282">為了說明其效果，第一個**工作負載擁有者**會指定 **prod-vnet** 與 **hub-vnet** 之間的對等互連。</span><span class="sxs-lookup"><span data-stu-id="ef81c-282">To illustrate the effect of this, the first **workload owner** specifies a peering between **prod-vnet** and **hub-vnet**.</span></span> <span data-ttu-id="ef81c-283">隨即建立第一個對等互連，但是沒有流量，因為從 **hub-vnet** 到 **prod-vnet** 的互補對等互連尚未指定。</span><span class="sxs-lookup"><span data-stu-id="ef81c-283">The first peering is created, but no traffic flows because the complementary peering from **hub-vnet** to **prod-vnet** has not yet been specified.</span></span> <span data-ttu-id="ef81c-284">第一個**工作負載擁有者**會連絡**網路作業**使用者，並且要求這個互補對等互連連線。</span><span class="sxs-lookup"><span data-stu-id="ef81c-284">The first **workload owner** contacts the **network operations** user and requests this complementary peering connection.</span></span>
    ![](../../_images/governance-3-5.png)
8. <span data-ttu-id="ef81c-285">**網路作業**使用者檢閱要求、核准，然後在 **hub-vnet** 的設定中指定對等互連。</span><span class="sxs-lookup"><span data-stu-id="ef81c-285">The **network operations** user reviews the request, approves it, then specifies the peering in the settings for the **hub-vnet**.</span></span> <span data-ttu-id="ef81c-286">對等互連連線現在已完成，網路流量會在兩個虛擬網路之間流動。</span><span class="sxs-lookup"><span data-stu-id="ef81c-286">The peering connection is now complete and network traffic flows between the two virtual networks.</span></span>
    ![](../../_images/governance-3-6.png)
9. <span data-ttu-id="ef81c-287">現在，第二個**工作負載擁有者**會將要求傳送給**訂用帳戶服務管理員**，並且新增至現有**生產**和**開發**環境中具有**參與者**角色的資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-287">Now, a second **workload owner** sends a request to the **subscription service administrator** and is added to the existing **production** and **development** environment resource groups with the **contributor** role.</span></span> <span data-ttu-id="ef81c-288">在每個資源群組中，第二個**工作負載擁有者**具有與第一個**工作負載擁有者**相同的所有資源權限。</span><span class="sxs-lookup"><span data-stu-id="ef81c-288">The second **workload owner** has the same permissions on all resources as the first **workload owner** in each resource group.</span></span>
    ![](../../_images/governance-3-7.png)
10. <span data-ttu-id="ef81c-289">第二個**工作負載擁有者**會在 **prod-vnet** 虛擬網路中建立子網路，然後新增兩部虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="ef81c-289">The second **workload owner** creates a subnet in the **prod-vnet** virtual network, then adds two virtual machines.</span></span> <span data-ttu-id="ef81c-290">第二個**工作負載擁有者**會將 environment 和 managedBy 標記套用至每個資源。</span><span class="sxs-lookup"><span data-stu-id="ef81c-290">The second **workload owner** applies the *environment* and *managedBy* tags to each resource.</span></span>
    ![](../../_images/governance-3-8.png)

<span data-ttu-id="ef81c-291">這個範例資源管理模型可讓我們在三個必要的環境中管理資源。</span><span class="sxs-lookup"><span data-stu-id="ef81c-291">This example resource management model enables us to manage resources in the three required environments.</span></span> <span data-ttu-id="ef81c-292">共用基礎結構資源會受到保護，因為訂用帳戶中只有單一使用者有權可以存取這些資源。</span><span class="sxs-lookup"><span data-stu-id="ef81c-292">The shared infrastructure resources are protected because there's only a single user in the subscription with permission to access those resources.</span></span> <span data-ttu-id="ef81c-293">每個工作負載擁有者能夠使用共用基礎結構資源，而不需要自己具備實際共用資源的任何權限。</span><span class="sxs-lookup"><span data-stu-id="ef81c-293">Each of the workload owners is able to use the shared infrastructure resources without having any permissions on the actual shared resources themselves.</span></span> <span data-ttu-id="ef81c-294">不過，此管理模組不符對於工作負載隔離的需求，兩個**工作負載擁有者**都能夠存取其他工作負載的資源。</span><span class="sxs-lookup"><span data-stu-id="ef81c-294">However, This management model fails the requirement for workload isolation - each of the two **workload owners** are able to access the resources of the other's workload.</span></span>

<span data-ttu-id="ef81c-295">此模型還有一個可能無法立竿見影的重要考量。</span><span class="sxs-lookup"><span data-stu-id="ef81c-295">There's another important consideration with this model that may not be immediately obvious.</span></span> <span data-ttu-id="ef81c-296">在範例中，它是 **app1 工作負載擁有者**，會要求與 **hub-vnet** 的網路對等互連連線，以提供與內部部署的連線。</span><span class="sxs-lookup"><span data-stu-id="ef81c-296">In the example, it was **app1 workload owner** that requested the network peering connection with the **hub-vnet** to provide connectivity to on-premises.</span></span> <span data-ttu-id="ef81c-297">**網路作業**使用者會根據使用該工作負載部署的資源，評估該要求。</span><span class="sxs-lookup"><span data-stu-id="ef81c-297">The **network operations** user evaluated that request based on the resources deployed with that workload.</span></span> <span data-ttu-id="ef81c-298">當**訂用帳戶擁有者**新增具有**參與者**角色的 **app2 工作負載擁有者**時，該使用者擁有 **prod-rg** 資源群組中所有資源的管理存取權限。</span><span class="sxs-lookup"><span data-stu-id="ef81c-298">When the **subscription owner** added **app2 workload owner** with the **contributor** role, that user had management access rights to all resources in the **prod-rg** resource group.</span></span>

![](../../_images/governance-3-10.png)

<span data-ttu-id="ef81c-299">這表示 **app2 工作負載擁有者**有權可以使用 **prod-vnet** 虛擬網路中的虛擬機器，來部署他們自己的子網路。</span><span class="sxs-lookup"><span data-stu-id="ef81c-299">This means **app2 workload owner** had permission to deploy their own subnet with virtual machines in the **prod-vnet** virtual network.</span></span> <span data-ttu-id="ef81c-300">根據預設，這些虛擬機器現在具有內部部署網路的存取權。</span><span class="sxs-lookup"><span data-stu-id="ef81c-300">By default, those virtual machines now have access to the on-premises network.</span></span> <span data-ttu-id="ef81c-301">**網路作業**使用者並不知道這些機器，且未核准它們與內部部署的連線。</span><span class="sxs-lookup"><span data-stu-id="ef81c-301">The **network operations** user is not aware of those machines and did not approve their connectivity to on-premises.</span></span>

<span data-ttu-id="ef81c-302">接下來，讓我們看看不同環境和工作負載中，具有多個資源群組的單一訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="ef81c-302">Next, let's look at a single subscription with multiple resources groups for different environments and workloads.</span></span> <span data-ttu-id="ef81c-303">請注意，在上一個範例中，因為每個環境的資源是在相同的資源群組中，所以它們很容易識別。</span><span class="sxs-lookup"><span data-stu-id="ef81c-303">Note that in the previous example, the resources for each environment were easily identifiable because they were in the same resource group.</span></span> <span data-ttu-id="ef81c-304">既然您不再有該群組，您必須依賴資源群組命名慣例來提供該功能。</span><span class="sxs-lookup"><span data-stu-id="ef81c-304">Now that you no longer have that grouping, you will have to rely on a resource group naming convention to provide that functionality.</span></span>

1. <span data-ttu-id="ef81c-305">**共用基礎結構**資源在此模型中仍然具有個別資源群組，所以維持不變。</span><span class="sxs-lookup"><span data-stu-id="ef81c-305">The **shared infrastructure** resources will still have a separate resource group in this model, so that remains the same.</span></span> <span data-ttu-id="ef81c-306">每個工作負載需要兩個資源群組，分別適用於**開發**和**生產**環境。</span><span class="sxs-lookup"><span data-stu-id="ef81c-306">Each workload requires two resource groups - one for each of the **development** and **production** environments.</span></span> <span data-ttu-id="ef81c-307">針對第一個工作負載，**訂用帳戶擁有者**會建立兩個資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-307">For the first workload, the **subscription owner** creates two resource groups.</span></span> <span data-ttu-id="ef81c-308">第一個資源群組名稱是 **app1-prod-rg**，第二個資源群組名稱是 **app1-dev-rg**。</span><span class="sxs-lookup"><span data-stu-id="ef81c-308">The first is named **app1-prod-rg** and the second one is named **app1-dev-rg**.</span></span> <span data-ttu-id="ef81c-309">如前所述，此命名慣例會識別與第一個工作負載相關聯的資源，**app1**，以及**開發**或**生產**環境。</span><span class="sxs-lookup"><span data-stu-id="ef81c-309">As discussed earlier, this naming convention identifies the resources as being associated with the first workload, **app1**, and either the **dev** or **prod** environment.</span></span> <span data-ttu-id="ef81c-310">同樣地，*訂用帳戶*擁有者會將 **app1 工作負載擁有者**新增至具有**參與者**角色的資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-310">Again, the *subscription* owner adds **app1 workload owner** to the resource group with the **contributor** role.</span></span>
    ![](../../_images/governance-3-12.png)
2. <span data-ttu-id="ef81c-311">類似於第一個範例，**app1 工作負載擁有者**會將名稱為 **app1-prod-vnet** 的虛擬網路部署至**生產**環境，將另一個名稱為 **app1-dev-vnet** 的虛擬網路部署至**開發**環境。</span><span class="sxs-lookup"><span data-stu-id="ef81c-311">Similar to the first example, **app1 workload owner** deploys a virtual network named **app1-prod-vnet** to the **production** environment, and another named **app1-dev-vnet** to the **development** environment.</span></span> <span data-ttu-id="ef81c-312">同樣地，**app1 工作負載擁有者**會將要求傳送給**網路作業**使用者，以建立對等互連連線。</span><span class="sxs-lookup"><span data-stu-id="ef81c-312">Again, **app1 workload owner** sends a request to the **network operations** user to create a peering connection.</span></span> <span data-ttu-id="ef81c-313">請注意，**app1 工作負載擁有者**會新增與第一個範例相同的標記，限制計數器遞減為在訂用帳戶中剩餘 997 個虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="ef81c-313">Note that **app1 workload owner** adds the same tags as in the first example, and the limit counter has been decremented to 997 virtual networks remaining in the subscription.</span></span>
    ![](../../_images/governance-3-13.png)
3. <span data-ttu-id="ef81c-314">**訂用帳戶擁有者**現在會為 **app2 工作負載擁有者**建立兩個資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-314">The **subscription owner** now creates two resource groups for **app2 workload owner**.</span></span> <span data-ttu-id="ef81c-315">遵循與 **app1 工作負載擁有者**相同的慣例，資源群組的名稱是 **app2-prod-rg** 和 **app2-dev-rg**。</span><span class="sxs-lookup"><span data-stu-id="ef81c-315">Following the same conventions as for **app1 workload owner**, the resource groups are named **app2-prod-rg** and **app2-dev-rg**.</span></span> <span data-ttu-id="ef81c-316">**訂用帳戶擁有者**會將 **app2 工作負載擁有者**新增至具有**參與者**角色的每個資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-316">The **subscription owner** adds **app2 workload owner** to each of the resource groups with the **contributor** role.</span></span>
    ![](../../_images/governance-3-14.png)
4. <span data-ttu-id="ef81c-317">*App2 工作負載擁有者*會將虛擬網路和虛擬機器部署到具有相同命名慣例的資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-317">*App2 workload owner* deploys virtual networks and virtual machines to the resource groups with the same naming conventions.</span></span> <span data-ttu-id="ef81c-318">標記隨即新增，限制計數器遞減為在訂用帳戶中剩餘 995 個虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="ef81c-318">Tags are added and the limit counter has been decremented to 995 virtual networks remaining in the *subscription*.</span></span>
    ![](../../_images/governance-3-15.png)
5. <span data-ttu-id="ef81c-319">*App2 工作負載擁有者*會將要求傳送給*網路作業*使用者，以對等互連 app2-prod-vnet 與 hub-vnet。</span><span class="sxs-lookup"><span data-stu-id="ef81c-319">*App2 workload owner* sends a request to the *network operations* user to peer the *app2-prod-vnet* with the *hub-vnet*.</span></span> <span data-ttu-id="ef81c-320">*網路作業*使用者會建立對等互連連線。</span><span class="sxs-lookup"><span data-stu-id="ef81c-320">The *network operations* user creates the peering connection.</span></span>
    ![](../../_images/governance-3-16.png)

<span data-ttu-id="ef81c-321">產生的管理模型類似於第一個範例，有幾項主要差異：</span><span class="sxs-lookup"><span data-stu-id="ef81c-321">The resulting management model is similar to the first example, with several key differences:</span></span>

* <span data-ttu-id="ef81c-322">兩個工作負載是依據工作負載和環境來隔離。</span><span class="sxs-lookup"><span data-stu-id="ef81c-322">Each of the two workloads is isolated by workload and by environment.</span></span>
* <span data-ttu-id="ef81c-323">此模型比起第一個範例模型還需要兩個虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="ef81c-323">This model required two more virtual networks than the first example model.</span></span> <span data-ttu-id="ef81c-324">雖然因為只有兩個工作負載，所以這不是重要的差異，但是理論上，此模型的工作負載數目限制為 24 個。</span><span class="sxs-lookup"><span data-stu-id="ef81c-324">While this is not an important distinction with only two workloads, the theoretical limit on the number of workloads for this model is 24.</span></span>
* <span data-ttu-id="ef81c-325">資源不再針對每個環境，群組在單一資源群組中。</span><span class="sxs-lookup"><span data-stu-id="ef81c-325">Resources are no longer grouped in a single resource group for each environment.</span></span> <span data-ttu-id="ef81c-326">要群組資源必須先了解針對每個環境使用的命名慣例。</span><span class="sxs-lookup"><span data-stu-id="ef81c-326">Grouping resources requires an understanding of the naming conventions used for each environment.</span></span>
* <span data-ttu-id="ef81c-327">每個對等互連虛擬網路連線是由網路作業使用者檢閱及核准。</span><span class="sxs-lookup"><span data-stu-id="ef81c-327">Each of the peered virtual network connections was reviewed and approved by the *network operations* user.</span></span>

<span data-ttu-id="ef81c-328">現在讓我們看看使用多個訂用帳戶的資源管理模型。</span><span class="sxs-lookup"><span data-stu-id="ef81c-328">Now let's look at a resource management model using multiple subscriptions.</span></span> <span data-ttu-id="ef81c-329">在此模型中，您會將三種環境對齊至個別的訂用帳戶：**共用服務**訂用帳戶、**生產**訂用帳戶，最後是**開發**訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="ef81c-329">In this model, you'll align each of the three environments to a separate subscription: a **shared services** subscription, **production** subscription, and finally a **development** subscription.</span></span> <span data-ttu-id="ef81c-330">此模型的考量類似於使用單一訂用帳戶的模型，您在其中必須決定如何將資源群組對齊至工作負載。</span><span class="sxs-lookup"><span data-stu-id="ef81c-330">The considerations for this model are similar to a model using a single subscription in that you have to decide how to align resource groups to workloads.</span></span> <span data-ttu-id="ef81c-331">已經判斷為每個工作負載建立資源群組可以滿足工作負載隔離需求，因此您在此範例中會緊緊遵循該模型。</span><span class="sxs-lookup"><span data-stu-id="ef81c-331">Already determined is that creating a resource group for each workload satisfies the workload isolation requirement, so you'll stick with that model in this example.</span></span>

1. <span data-ttu-id="ef81c-332">在此模型中，有三個訂用帳戶：共用基礎結構、生產和開發。</span><span class="sxs-lookup"><span data-stu-id="ef81c-332">In this model, there are three *subscriptions*: *shared infrastructure*, *production*, and *development*.</span></span> <span data-ttu-id="ef81c-333">三個訂用帳戶都需要訂用帳戶擁有者，在範例中，您會為所有三個訂用帳戶使用相同的使用者帳戶。</span><span class="sxs-lookup"><span data-stu-id="ef81c-333">Each of these three subscriptions requires a *subscription owner*, and in the simple example you'll use the same user account for all three.</span></span> <span data-ttu-id="ef81c-334">共用基礎結構資源的管理方式類似於上述前兩個範例，第一個工作負載是與生產環境中的 app1-rg，以及開發環境中相同名稱的資源群組相關聯。</span><span class="sxs-lookup"><span data-stu-id="ef81c-334">The *shared infrastructure* resources are managed similarly to the first two examples above, and the first workload is associated with the *app1-rg* in the *production* environment and the same-named resource group in the *development* environment.</span></span> <span data-ttu-id="ef81c-335">app1 工作負載擁有者會新增到具有參與者角色的每個資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-335">The *app1 workload owner* is added to each of the resource group with the *contributor* role.</span></span>
    ![](../../_images/governance-3-17.png)
2. <span data-ttu-id="ef81c-336">如同先前的範例，app1 工作負載擁有者會建立資源，並且要求與共用基礎結構虛擬網路的對等互連連線。</span><span class="sxs-lookup"><span data-stu-id="ef81c-336">As with the earlier examples, *app1 workload owner* creates the resources and requests the peering connection with the *shared infrastructure* virtual network.</span></span> <span data-ttu-id="ef81c-337">App1 工作負載擁有者只會新增 managedBy 標記，因為不再需要 environment 標記。</span><span class="sxs-lookup"><span data-stu-id="ef81c-337">*App1 workload owner* adds only the *managedBy* tag because there is no longer a need for the *environment* tag.</span></span> <span data-ttu-id="ef81c-338">也就是說，每個環境的資源現在會分組在同一個訂用帳戶，environment 標記是多餘的。</span><span class="sxs-lookup"><span data-stu-id="ef81c-338">That is, resources are for each environment are now grouped in the same *subscription* and the *environment* tag is redundant.</span></span> <span data-ttu-id="ef81c-339">限制計數器會遞減為剩餘 999 個虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="ef81c-339">The limit counter is decremented to 999 virtual networks remaining.</span></span>
    ![](../../_images/governance-3-18.png)
3. <span data-ttu-id="ef81c-340">最後，訂用帳戶擁有者針對第二個工作負載重複此程序，在 \*參與者角色中新增具有 app2 工作負載擁有者的資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-340">Finally, the *subscription owner* repeats the process for the second workload, adding the resource groups with the *app2 workload owner* in the \*contributor role.</span></span> <span data-ttu-id="ef81c-341">每個環境訂用帳戶的限制計數器會遞減為剩餘 998 個虛擬網路。</span><span class="sxs-lookup"><span data-stu-id="ef81c-341">The limit counter for each of the environment subscriptions is decremented to 998 virtual networks remaining.</span></span>

<span data-ttu-id="ef81c-342">此管理模型具有上述第二個範例的優點。</span><span class="sxs-lookup"><span data-stu-id="ef81c-342">This management model has the benefits of the second example above.</span></span> <span data-ttu-id="ef81c-343">不過，主要差異是，因為它們是分散在兩個訂用帳戶，所以限制比較不成問題。</span><span class="sxs-lookup"><span data-stu-id="ef81c-343">However, the key difference is that limits are less of an issue due to the fact that they are spread over two *subscriptions*.</span></span> <span data-ttu-id="ef81c-344">缺點是標記追蹤的資料成本，必須跨所有三個訂用帳戶進行彙總。</span><span class="sxs-lookup"><span data-stu-id="ef81c-344">The drawback is that the cost data tracked by tags must be aggregated across all three *subscriptions*.</span></span>

<span data-ttu-id="ef81c-345">因此，您可以根據您的需求優先順序，選取這兩個範例資源管理模型其中之一。</span><span class="sxs-lookup"><span data-stu-id="ef81c-345">Therefore, you can select any of these two examples resource management models depending on the priority of your requirements.</span></span> <span data-ttu-id="ef81c-346">如果您預期貴組織不會達到單一訂用帳戶的服務限制，則您可以使用單一訂用帳戶與多個資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-346">If you anticipate that your organization will not reach the service limits for a single subscription, you can use a single subscription with multiple resource groups.</span></span> <span data-ttu-id="ef81c-347">相反地，如果貴組織預期有許多工作負載，每個環境有多個訂用帳戶可能比較理想。</span><span class="sxs-lookup"><span data-stu-id="ef81c-347">Conversely, if your organization anticipates many workloads, multiple subscriptions for each environment may be better.</span></span>

## <a name="implementing-the-resource-management-model"></a><span data-ttu-id="ef81c-348">實作資源管理模型</span><span class="sxs-lookup"><span data-stu-id="ef81c-348">Implementing the resource management model</span></span>

<span data-ttu-id="ef81c-349">您已了解用來管理 Azure 資源存取權的數個不同模型。</span><span class="sxs-lookup"><span data-stu-id="ef81c-349">You've learned about several different models for governing access to Azure resources.</span></span> <span data-ttu-id="ef81c-350">現在您會逐步進行所需的步驟，使用一個訂用帳戶為設計指南的每個**共用基礎結構**、**生產**和**開發**環境，實作資源管理模型。</span><span class="sxs-lookup"><span data-stu-id="ef81c-350">Now you'll walk through the steps necessary to implement the resource management model with one subscription for each of the **shared infrastructure**, **production**, and **development** environments from the design guide.</span></span> <span data-ttu-id="ef81c-351">針對全部三個環境，您會有一個**訂用帳戶擁有者**。</span><span class="sxs-lookup"><span data-stu-id="ef81c-351">You'll have one **subscription owner** for all three environments.</span></span> <span data-ttu-id="ef81c-352">每個工作負載會在**資源群組**中隔離，具有新增了**參與者**角色的**工作負載擁有者**。</span><span class="sxs-lookup"><span data-stu-id="ef81c-352">Each workload will be isolated in a **resource group** with a **workload owner** added with the **contributor** role.</span></span>

> [!NOTE]
> <span data-ttu-id="ef81c-353">請參閱[了解 Azure 中的資源存取][understand-resource-access-in-azure]以深入了解 Azure 帳戶和訂用帳戶之間的關聯性。</span><span class="sxs-lookup"><span data-stu-id="ef81c-353">Read [understanding resource access in Azure][understand-resource-access-in-azure] to learn more about the relationship between Azure Accounts and subscriptions.</span></span>

<span data-ttu-id="ef81c-354">請遵循下列步驟：</span><span class="sxs-lookup"><span data-stu-id="ef81c-354">Follow these steps:</span></span>

1. <span data-ttu-id="ef81c-355">如果貴組織還沒有帳戶的話，請建立 [Azure 帳戶](/azure/active-directory/sign-up-organization)。</span><span class="sxs-lookup"><span data-stu-id="ef81c-355">Create an [Azure account](/azure/active-directory/sign-up-organization) if your organization doesn't already have one.</span></span> <span data-ttu-id="ef81c-356">註冊 Azure 帳戶的人員會成為 Azure 帳戶管理員，而且貴組織的領導必須選取個人來承擔這個角色。</span><span class="sxs-lookup"><span data-stu-id="ef81c-356">The person who signs up for the Azure account becomes the Azure account administrator, and your organization's leadership must select an individual to assume this role.</span></span> <span data-ttu-id="ef81c-357">這個個人將負責：</span><span class="sxs-lookup"><span data-stu-id="ef81c-357">This individual will be responsible for:</span></span>
    - <span data-ttu-id="ef81c-358">建立訂用帳戶，並且</span><span class="sxs-lookup"><span data-stu-id="ef81c-358">Creating subscriptions, and</span></span>
    - <span data-ttu-id="ef81c-359">建立和管理 [Azure Active Directory (AD)](/azure/active-directory/active-directory-whatis) 租用戶，在其中儲存這些訂用帳戶的使用者身分識別。</span><span class="sxs-lookup"><span data-stu-id="ef81c-359">Creating and administering [Azure Active Directory (AD)](/azure/active-directory/active-directory-whatis) tenants that store user identity for those subscriptions.</span></span>
2. <span data-ttu-id="ef81c-360">貴組織的領導小組決定哪些人負責：</span><span class="sxs-lookup"><span data-stu-id="ef81c-360">Your organization's leadership team decides which people are responsible for:</span></span>
    - <span data-ttu-id="ef81c-361">使用者身分識別管理，[Azure AD 租用戶](/azure/active-directory/develop/active-directory-howto-tenant)預設會在貴組織的 Azure 帳戶建立時建立，而且帳戶管理員預設會新增為 [Azure AD 全域管理員](/azure/active-directory/active-directory-assign-admin-roles-azure-portal#details-about-the-global-administrator-role)。</span><span class="sxs-lookup"><span data-stu-id="ef81c-361">Management of user identity; an [Azure AD tenant](/azure/active-directory/develop/active-directory-howto-tenant) is created by default when your organization's Azure Account is created, and the account administrator is added as the [Azure AD global administrator](/azure/active-directory/active-directory-assign-admin-roles-azure-portal#details-about-the-global-administrator-role) by default.</span></span> <span data-ttu-id="ef81c-362">貴組織可以選擇另一個使用者來管理使用者身分識別，方法是[將 Azure AD 全域管理員角色指派給該使用者](/azure/active-directory/active-directory-users-assign-role-azure-portal)。</span><span class="sxs-lookup"><span data-stu-id="ef81c-362">Your organization can choose another user to manage user identity by [assigning the Azure AD global administrator role to that user](/azure/active-directory/active-directory-users-assign-role-azure-portal).</span></span>
    - <span data-ttu-id="ef81c-363">訂用帳戶，這表示這些使用者：</span><span class="sxs-lookup"><span data-stu-id="ef81c-363">Subscriptions, which means these users:</span></span>
        - <span data-ttu-id="ef81c-364">管理與該訂用帳戶中資源使用量相關聯的成本，</span><span class="sxs-lookup"><span data-stu-id="ef81c-364">Manage costs associated with resource usage in that subscription,</span></span>
        - <span data-ttu-id="ef81c-365">實作和維護資源存取權的最小權限模型，以及</span><span class="sxs-lookup"><span data-stu-id="ef81c-365">Implement and maintain least permission model for resource access, and</span></span>
        - <span data-ttu-id="ef81c-366">持續追蹤服務限制。</span><span class="sxs-lookup"><span data-stu-id="ef81c-366">Keep track of service limits.</span></span>
    - <span data-ttu-id="ef81c-367">共用基礎結構服務 (如果貴組織決定要使用此模型)，這表示此使用者負責：</span><span class="sxs-lookup"><span data-stu-id="ef81c-367">Shared infrastructure services (if your organization decides to use this model), which means this user is responsible for:</span></span>
        - <span data-ttu-id="ef81c-368">內部部署至 Azure 網路連線，以及</span><span class="sxs-lookup"><span data-stu-id="ef81c-368">On-premises to Azure network connectivity, and</span></span>
        - <span data-ttu-id="ef81c-369">透過虛擬網路對等互連，在 Azure 內網路連線的擁有權。</span><span class="sxs-lookup"><span data-stu-id="ef81c-369">Ownership of network connectivity within Azure through virtual network peering.</span></span>
    - <span data-ttu-id="ef81c-370">工作負載擁有者。</span><span class="sxs-lookup"><span data-stu-id="ef81c-370">Workload owners.</span></span>
3. <span data-ttu-id="ef81c-371">Azure AD 全域管理員會為以下人員[建立新的使用者帳戶](/azure/active-directory/add-users-azure-active-directory)：</span><span class="sxs-lookup"><span data-stu-id="ef81c-371">The Azure AD global administrator [creates the new user accounts](/azure/active-directory/add-users-azure-active-directory) for:</span></span>
    - <span data-ttu-id="ef81c-372">將成為與每個環境相關聯訂用帳戶**訂用帳戶擁有者**的人員。</span><span class="sxs-lookup"><span data-stu-id="ef81c-372">The person who will be the **subscription owner** for each subscription associated with each environment.</span></span> <span data-ttu-id="ef81c-373">請注意，只有當訂用帳戶**服務管理員**不負責管理每個訂用帳戶/環境的資源存取權時，才需要這麼做。</span><span class="sxs-lookup"><span data-stu-id="ef81c-373">Note that this is necessary only if the subscription **service administrator** will not be tasked with managing resource access for each subscription/environment.</span></span>
    - <span data-ttu-id="ef81c-374">將成為**網路作業使用者**的人員，以及</span><span class="sxs-lookup"><span data-stu-id="ef81c-374">The person who will be the **network operations user**, and</span></span>
    - <span data-ttu-id="ef81c-375">身為**工作負載擁有者**的人員。</span><span class="sxs-lookup"><span data-stu-id="ef81c-375">The people who are **workload owners**.</span></span>
4. <span data-ttu-id="ef81c-376">Azure 帳戶管理員會使用 [Azure 帳戶入口網站](https://account.azure.com)，建立下列三個訂用帳戶：</span><span class="sxs-lookup"><span data-stu-id="ef81c-376">The Azure account administrator creates the following three subscriptions using the [Azure account portal](https://account.azure.com):</span></span>
    - <span data-ttu-id="ef81c-377">適用於**共用基礎結構**環境的訂用帳戶，</span><span class="sxs-lookup"><span data-stu-id="ef81c-377">A subscription for the **shared infrastructure** environment,</span></span>
    - <span data-ttu-id="ef81c-378">適用於**生產**環境的訂用帳戶，以及</span><span class="sxs-lookup"><span data-stu-id="ef81c-378">A subscription for the **production** environment, and</span></span>
    - <span data-ttu-id="ef81c-379">適用於**開發**環境的訂用帳戶。</span><span class="sxs-lookup"><span data-stu-id="ef81c-379">A subscription for the **development** environment.</span></span>
5. <span data-ttu-id="ef81c-380">Azure 帳戶管理員會[將訂用帳戶服務擁有者新增至每個訂用帳戶](/azure/billing/billing-add-change-azure-subscription-administrator#add-an-rbac-owner-admin-for-a-subscription-in-azure-portal)。</span><span class="sxs-lookup"><span data-stu-id="ef81c-380">The Azure account administrator [adds the subscription service owner to each subscription](/azure/billing/billing-add-change-azure-subscription-administrator#add-an-rbac-owner-admin-for-a-subscription-in-azure-portal).</span></span>
6. <span data-ttu-id="ef81c-381">建立**工作負載擁有者**的核准程序，以要求建立資源群組。</span><span class="sxs-lookup"><span data-stu-id="ef81c-381">Create an approval process for **workload owners** to request the creation of resource groups.</span></span> <span data-ttu-id="ef81c-382">核准程序的實作方式有許多種，例如透過電子郵件，或者您可以使用如 [SharePoint 工作流程](https://support.office.com/article/introduction-to-sharepoint-workflow-07982276-54e8-4e17-8699-5056eff4d9e3)的處理程序管理工具。</span><span class="sxs-lookup"><span data-stu-id="ef81c-382">The approval process can be implemented in many ways, such as over email, or you can using a process management tool such as [SharePoint workflows](https://support.office.com/article/introduction-to-sharepoint-workflow-07982276-54e8-4e17-8699-5056eff4d9e3).</span></span> <span data-ttu-id="ef81c-383">核准程序可以依照下列步驟：</span><span class="sxs-lookup"><span data-stu-id="ef81c-383">The approval process can follow these steps:</span></span>
    - <span data-ttu-id="ef81c-384">**工作負載擁有者**為**開發**環境、**生產**環境或兩者中的必要 Azure 資源準備用料表，並且將它提交給**訂用帳戶擁有者**。</span><span class="sxs-lookup"><span data-stu-id="ef81c-384">The **workload owner** prepares a bill of materials for required Azure resources in either the **development** environment, **production** environment, or both, and submits it to the **subscription owner**.</span></span>
    - <span data-ttu-id="ef81c-385">**訂用帳戶擁有者**檢閱用料表並驗證要求的資源，以確保要求的資源適合其規劃使用，例如，檢查要求的[虛擬機器大小](/azure/virtual-machines/windows/sizes)正確無誤。</span><span class="sxs-lookup"><span data-stu-id="ef81c-385">The **subscription owner** reviews the bill of materials and validates the requested resources to ensure that the requested resources are appropriate for their planned use - for example, checking that the requested [virtual machine sizes](/azure/virtual-machines/windows/sizes) are correct.</span></span>
    - <span data-ttu-id="ef81c-386">如果要求未獲得核准，**工作負載擁有者**會收到通知。</span><span class="sxs-lookup"><span data-stu-id="ef81c-386">If the request is not approved, the **workload owner** is notified.</span></span> <span data-ttu-id="ef81c-387">如果要求通過核准，**訂用帳戶擁有者**會遵循貴組織的[命名慣例](/azure/architecture/best-practices/naming-conventions)來[建立要求的資源群組](/azure/azure-resource-manager/resource-group-portal#manage-resource-groups)，[新增**工作負載擁有者**](/azure/role-based-access-control/role-assignments-portal#add-access)，其具有[**參與者**角色](/azure/role-based-access-control/built-in-roles#contributor)，並且將通知傳送給已建立資源群組的**工作負載擁有者**。</span><span class="sxs-lookup"><span data-stu-id="ef81c-387">If the request is approved, the **subscription owner** [creates the requested resource group](/azure/azure-resource-manager/resource-group-portal#manage-resource-groups) following your organization's [naming conventions](/azure/architecture/best-practices/naming-conventions), [adds the **workload owner**](/azure/role-based-access-control/role-assignments-portal#add-access) with the [**contributor** role](/azure/role-based-access-control/built-in-roles#contributor) and sends notification to the **workload owner** that the resource group has been created.</span></span>
7. <span data-ttu-id="ef81c-388">為工作負載擁有者建立核准程序，以要求來自共用基礎結構擁有者的虛擬網路對等互連連線。</span><span class="sxs-lookup"><span data-stu-id="ef81c-388">Create an approval process for workload owners to request a virtual network peering connection from the shared infrastructure owner.</span></span> <span data-ttu-id="ef81c-389">如同上一個步驟，這個核准程序可以使用電子郵件或處理程序管理工具來實作。</span><span class="sxs-lookup"><span data-stu-id="ef81c-389">As with the previous step, this approval process can be implemented using email or a process management tool.</span></span>

<span data-ttu-id="ef81c-390">既然您已實作治理模型，您可以部署共用基礎結構服務。</span><span class="sxs-lookup"><span data-stu-id="ef81c-390">Now that you've implemented your governance model, you can deploy your shared infrastructure services.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ef81c-391">後續步驟</span><span class="sxs-lookup"><span data-stu-id="ef81c-391">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="ef81c-392">了解如何部署基本基礎結構</span><span class="sxs-lookup"><span data-stu-id="ef81c-392">Learn about deploying a basic infrastructure</span></span>](../../infrastructure/basic-workload.md)

<!-- links -->
[understand-resource-access-in-azure]: /azure/role-based-access-control/rbac-and-directory-admin-roles

[rbac-built-in-owner]: /azure/role-based-access-control/built-in-roles#owner
[rbac-built-in-roles]: /azure/role-based-access-control/built-in-roles
